<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>TaxPro Advisors — Email Preferences</title>
	<!-- Bootstrap 5 CSS -->
	<link
		href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
		rel="stylesheet"
		integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
		crossorigin="anonymous"
	/>
	<!-- Google Fonts: Inter -->
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
	<style>  
		/* Theme variables: light (default) and dark */
		:root {
			--brand: #2b7a78;
			--brand-600: #205d5d;
			--accent: #17252a;
			--bg: #f4f8fb;
			--card-bg: #ffffff;
			--text: #20323f;
			--muted: #6b7a88;
			--border: #e6eef6;
			--border-soft: #eef3f8;
			--success: #2aa876;
		}
		body.theme-light {
			color-scheme: light;
			--brand: #2b7a78;
			--brand-600: #205d5d;
			--accent: #17252a;
			--bg: #f4f8fb;
			--card-bg: #ffffff;
			--text: #20323f;
			--muted: #6b7a88;
			--border: #e6eef6;
			--border-soft: #eef3f8;
			--success: #2aa876;
		}
		body.theme-dark {
			color-scheme: dark;
			--brand: #3ec0b8;
			--brand-600: #2a9a93;
			--accent: #e6edf3;
			--bg: #0f1317;
			--card-bg: #121a21;
			--text: #e6edf3;
			--muted: #9aa9b7;
			--border: #1f2a33;
			--border-soft: #1a242d;
			--success: #34d399;
		}

		html, body { height: 100%; }
		body {
			background: radial-gradient(1200px 600px at 20% -10%, #eaf2ff 0%, transparent 60%),
						radial-gradient(1200px 600px at 80% 110%, #e9fff6 0%, transparent 60%),
						var(--bg);
			color: var(--text);
			font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
			/* Sticky footer layout */
			min-height: 100vh;
			display: flex;
			flex-direction: column;
		}

		.navbar {
			background: linear-gradient(90deg, #ffffff 0%, #f7fbff 100%) !important;
		}
		body.theme-dark .navbar {
			background: linear-gradient(90deg, #121a21 0%, #0f1317 100%) !important;
		}

		.navbar-brand { color: var(--accent); }
		.brand-logo { width: 40px; height: 40px; border-radius: 8px; box-shadow: 0 1px 2px rgba(0,0,0,.08); }

		.prefs-card { max-width: 760px; border: 1px solid var(--border); background-color: var(--card-bg); }
		.prefs-card .card-header { border-bottom: 1px solid var(--border-soft); background-color: var(--card-bg) !important; }
		.prefs-card .card-footer { background-color: var(--card-bg) !important; }
		.prefs-card .card-header .h4,
		.prefs-card .card-header .subtitle,
		.prefs-card .card-footer small { color: var(--text); }

		.h4 { color: var(--accent); }
		.subtitle { color: var(--muted); }

		.btn-primary { background-color: var(--brand); border-color: var(--brand); color: #fff; }
		.btn-primary:hover { background-color: var(--brand-600); border-color: var(--brand-600); }

		.btn-outline-primary { color: var(--brand); border-color: var(--brand); }
		.btn-outline-primary:hover { background-color: rgba(43, 122, 120, 0.08); border-color: var(--brand); }

		/* Switch polish */
		.form-check.form-switch .form-check-input {
			width: 3rem; height: 1.5rem;
		}
		.form-check-input:checked { background-color: var(--brand); border-color: var(--brand); }
		body.theme-dark .form-check-input { background-color: #24313a; border-color: #24313a; }
		.form-check-label { cursor: pointer; }
		.form-check + .form-check { border-top: 1px dashed #e9eef3; padding-top: .75rem; }

		.card-footer small { color: var(--muted); }

		.toast .badge.bg-success { background-color: var(--success) !important; }
		body.theme-dark .toast { background-color: var(--card-bg); color: var(--text); }
		/* Ensure footer sticks to bottom in flex layout */
		.footer { margin-top: auto; }

		/* Responsive min-height constraints for mobile → desktop */
		@media (max-width: 576px) {
			main.container {
				min-height: auto; /* Avoid pushing content below footer */
				align-items: flex-start !important;
				justify-content: flex-start !important;
				padding-top: .5rem;
				padding-bottom: 1rem;
			}
			.prefs-card { box-shadow: none; border-radius: 10px; }
			.prefs-card .card-header, .prefs-card .card-footer { padding: .75rem 1rem; }
			#emailPrefsForm { padding: .75rem !important; }
			.h4 { font-size: 1.125rem; }
			.subtitle { font-size: .9rem; }
			.form-check-label { font-size: .95rem; }
			.form-check { margin-bottom: .5rem !important; }
			.form-check + .form-check { padding-top: .25rem; }
			.form-check.form-switch .form-check-input { width: 2.5rem; height: 1.25rem; }
		}
		/* On larger screens, rely on flex centering without forcing min-height,
		   so the footer remains visible at the bottom of the viewport */
	</style>
	<meta name="description" content="Toggle your email communication preferences for tax-related updates and offers." />
</head>
<body>
	<nav class="navbar navbar-expand-lg bg-body-tertiary border-bottom">
		<div class="container align-items-center d-flex">
			<a class="navbar-brand d-flex align-items-center" href="#">
				<img src="https://placehold.co/40x40/2b7a78/ffffff?text=T" class="brand-logo me-2" alt="TaxPro Advisors logo" />
				<span class="h5 mb-0">TaxPro Advisors</span>
			</a>
			<div class="ms-auto d-flex align-items-center gap-3">
				<div class="text-muted small d-none d-md-block">Manage your email preferences</div>
				<div class="form-check form-switch m-0">
					<input class="form-check-input" type="checkbox" id="themeToggle" aria-label="Toggle dark mode" />
					<label class="form-check-label small" for="themeToggle">Dark mode</label>
				</div>
			</div>
		</div>
	</nav>

	<main class="container py-4 d-flex align-items-center justify-content-center flex-grow-1">
		<div class="card shadow-sm prefs-card mx-auto">
			<div class="card-header">
				<h1 class="h4 mb-1">Email Preferences</h1>
				<p class="subtitle mb-0">Choose the communications you want to receive.</p>
			</div>
			<div class="card-body">
				<form id="emailPrefsForm" class="needs-validation p-3 p-md-4" novalidate action="https://www.w3schools.com/action_page.php" method="post" target="_blan                                                 ">
					<div class="form-check form-switch mb-3">
						<input class="form-check-input" type="checkbox" id="criticalAlerts" name="criticalAlerts" value="true" />
						<label class="form-check-label" for="criticalAlerts">
							Critical alerts and notifications about your tax return
						</label>
					</div>

					<div class="form-check form-switch mb-3">
						<input class="form-check-input" type="checkbox" id="specialOffers" name="specialOffers" value="true" />
						<label class="form-check-label" for="specialOffers">
							Information about special offers for tax services
						</label>
					</div>

					<div class="form-check form-switch mb-3">
						<input class="form-check-input" type="checkbox" id="irsChanges" name="irsChanges" value="true" />
						<label class="form-check-label" for="irsChanges">
							Receive notifications of IRS changes and deadlines
						</label>
					</div>

					<div class="form-check form-switch mb-3">
						<input class="form-check-input" type="checkbox" id="monthlyNewsletter" name="monthlyNewsletter" value="true" />
						<label class="form-check-label" for="monthlyNewsletter">
							Learn from a monthly tax newsletter with tax news and tips
						</label>
					</div>

					<div class="d-flex flex-wrap gap-2 mt-4">
						<button type="button" id="toggleAllBtn" class="btn btn-outline-primary">Select All</button>
						<button type="submit" id="saveBtn" class="btn btn-primary">Save Preferences</button>
						<button type="button" id="resetBtn" class="btn btn-outline-secondary">Reset</button>
					</div>
				</form>
			</div>
			<div class="card-footer bg-white">
				<small class="text-muted">Toggle each option to control which emails you receive.</small>
			</div>
		</div>

		<!-- Save toast -->
		<div class="position-fixed bottom-0 end-0 p-3" style="z-index: 1080">
			<div id="saveToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
				<div class="toast-header">
					<span class="badge bg-success me-2">Saved</span>
					<strong class="me-auto">Preferences Updated</strong>
					<small>Just now</small>
					<button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
				</div>
				<div class="toast-body">
					Your email preferences have been saved on this device.
				</div>
			</div>
		</div>
	</main>

	<!-- Footer -->
	<footer class="footer mt-5">
		<div class="container py-4">
			<div class="row g-4">
				<div class="col-12 col-md-6">
					<div class="d-flex align-items-center mb-2">
						<img src="https://placehold.co/40x40/2b7a78/ffffff?text=T" class="brand-logo me-2" alt="TaxPro Advisors logo" />
						<strong>TaxPro Advisors</strong>
					</div>
					<p class="subtitle mb-2">Helping you stay on top of taxes.</p>
					<small class="text-muted">1234 Main St, Suite 100, Amarillo, TX 79101</small><br />
					<small class="text-muted">support@taxproadvisors.example • (555) 123-4567</small>
				</div>
				<div class="col-6 col-md-3">
					<h6 class="mb-2">Resources</h6>
					<ul class="list-unstyled small">
						<li><a href="#" class="link-body-emphasis text-decoration-none">Privacy Policy</a></li>
						<li><a href="#" class="link-body-emphasis text-decoration-none">Terms of Service</a></li>
						<li><a href="#" class="link-body-emphasis text-decoration-none">Support</a></li>
					</ul>
				</div>
				<div class="col-6 col-md-3">
					<h6 class="mb-2">Follow Us</h6>
					<ul class="list-unstyled small">
						<li><a href="#" class="link-body-emphasis text-decoration-none">LinkedIn</a></li>
						<li><a href="#" class="link-body-emphasis text-decoration-none">Twitter</a></li>
						<li><a href="#" class="link-body-emphasis text-decoration-none">Facebook</a></li>
					</ul>
				</div>
			</div>
			<div class="border-top mt-3 pt-3 d-flex justify-content-between align-items-center">
				<small class="text-muted">© <span id="year"></span> TaxPro Advisors. All rights reserved.</small>
				<small class="text-muted">EIN 12-3456789</small>
			</div>
		</div>
	</footer>

	<!-- Bootstrap 5 JS -->
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
		crossorigin="anonymous"
	></script>

	<script>
		(function () {
			const keys = {
				criticalAlerts: 'emailPrefs_criticalAlerts',
				specialOffers: 'emailPrefs_specialOffers',
				irsChanges: 'emailPrefs_irsChanges',
				monthlyNewsletter: 'emailPrefs_monthlyNewsletter',
			};

			const els = {
				criticalAlerts: document.getElementById('criticalAlerts'),
				specialOffers: document.getElementById('specialOffers'),
				irsChanges: document.getElementById('irsChanges'),
				monthlyNewsletter: document.getElementById('monthlyNewsletter'),
				form: document.getElementById('emailPrefsForm'),
				resetBtn: document.getElementById('resetBtn'),
				saveToast: document.getElementById('saveToast'),
				toggleAllBtn: document.getElementById('toggleAllBtn'),
				themeToggle: document.getElementById('themeToggle'),
				body: document.body,
			};

			// Theme handling
			const THEME_KEY = 'ui_theme';
			function applyTheme(mode) {
				els.body.classList.remove('theme-light', 'theme-dark');
				const applied = mode === 'dark' ? 'theme-dark' : 'theme-light';
				els.body.classList.add(applied);
				document.documentElement.setAttribute('data-bs-theme', mode === 'dark' ? 'dark' : 'light');
				if (els.themeToggle) els.themeToggle.checked = mode === 'dark';
			}

			const savedTheme = localStorage.getItem(THEME_KEY);
			const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			applyTheme(savedTheme ? savedTheme : (prefersDark ? 'dark' : 'light'));

			if (els.themeToggle) {
				els.themeToggle.addEventListener('change', () => {
					const mode = els.themeToggle.checked ? 'dark' : 'light';
					applyTheme(mode);
					try { localStorage.setItem(THEME_KEY, mode); } catch (e) {}
				});
			}

			// If user hasn't set a theme, adapt on system change
			if (!savedTheme && window.matchMedia) {
				window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
					applyTheme(e.matches ? 'dark' : 'light');
				});
			}

			const inputs = [
				els.criticalAlerts,
				els.specialOffers,
				els.irsChanges,
				els.monthlyNewsletter,
			];

			function setToggleButtonStateFromInputs() {
				const allChecked = inputs.every((i) => i.checked);
				els.toggleAllBtn.textContent = allChecked ? 'Deselect All' : 'Select All';
				els.toggleAllBtn.dataset.mode = allChecked ? 'deselect' : 'select';
			}

			// Load saved state
			Object.entries(keys).forEach(([id, key]) => {
				try {
					const saved = localStorage.getItem(key);
					if (saved !== null) {
						els[id].checked = saved === 'true';
					}
				} catch (e) {
					// localStorage might be unavailable; ignore
				}
			});

			// Initialize toggle-all button text based on current state
			setToggleButtonStateFromInputs();

			// Save on submit (and allow normal POST to proceed)
			els.form.addEventListener('submit', () => {
				Object.entries(keys).forEach(([id, key]) => {
					try {
						localStorage.setItem(key, String(els[id].checked));
					} catch (e) {}
				});
			});

			// Toggle All handler (idempotent select/deselect all)
			els.toggleAllBtn.addEventListener('click', () => {
				const mode = els.toggleAllBtn.dataset.mode || 'select';
				const targetChecked = mode === 'select';
				inputs.forEach((input) => (input.checked = targetChecked));
				setToggleButtonStateFromInputs();
			});

			// Reset handler
			els.resetBtn.addEventListener('click', () => {
				Object.values(els)
					.filter((el) => el && el.tagName === 'INPUT')
					.forEach((input) => (input.checked = false));
				setToggleButtonStateFromInputs();
			});

			// Set current year in footer
			const yearEl = document.getElementById('year');
			if (yearEl) yearEl.textContent = new Date().getFullYear();
		})();
	</script>
</body>
</html>
